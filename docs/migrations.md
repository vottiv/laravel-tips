## Migrations

- [–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π](#–ü–æ—Ä—è–¥–æ–∫-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–º–∏–≥—Ä–∞—Ü–∏–π)
- [–ü–æ–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏](#–ü–æ–ª—è-–º–∏–≥—Ä–∞—Ü–∏–∏-—Å-—á–∞—Å–æ–≤—ã–º–∏-–ø–æ—è—Å–∞–º–∏)
- [–¢–∏–ø—ã —Å—Ç–æ–ª–±—Ü–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–¢–∏–ø—ã-—Å—Ç–æ–ª–±—Ü–æ–≤-–º–∏–≥—Ä–∞—Ü–∏–∏-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–ó–Ω–∞—á–µ–Ω–∏—è timestamp –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é](#–ó–Ω–∞—á–µ–Ω–∏—è-timestamp-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
- [–°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π](#–°—Ç–∞—Ç—É—Å-–º–∏–≥—Ä–∞—Ü–∏–π)
- [–ù–∞–ø–∏—Å–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏](#–ù–∞–ø–∏—Å–∞–Ω–∏–µ-–∏–º–µ–Ω–∏-–º–∏–≥—Ä–∞—Ü–∏–∏-—Å-–ø—Ä–æ–±–µ–ª–∞–º–∏)
- [–°–æ–∑–¥–∞—Ç—å —Å—Ç–æ–ª–±–µ—Ü –ø–æ—Å–ª–µ –¥—Ä—É–≥–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞](#–°–æ–∑–¥–∞—Ç—å-—Å—Ç–æ–ª–±–µ—Ü-–ø–æ—Å–ª–µ-–¥—Ä—É–≥–æ–≥–æ-—Å—Ç–æ–ª–±—Ü–∞)
- [–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã](#–°–æ–∑–¥–∞—Ç—å-–º–∏–≥—Ä–∞—Ü–∏—é-–¥–ª—è-—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π-—Ç–∞–±–ª–∏—Ü—ã)
- [–í—ã–≤–æ–¥ SQL –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –º–∏–≥—Ä–∞—Ü–∏–π](#–í—ã–≤–æ–¥-SQL-–ø–µ—Ä–µ–¥-–∑–∞–ø—É—Å–∫–æ–º-–º–∏–≥—Ä–∞—Ü–∏–π)
- [–ê–Ω–æ–Ω–∏–º–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏](#–ê–Ω–æ–Ω–∏–º–Ω—ã–µ-–º–∏–≥—Ä–∞—Ü–∏–∏)
- [–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞](#–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π-–¥–ª—è-—Å—Ç–æ–ª–±—Ü–∞)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ —Å—Ç–æ–ª–±—Ü–∞](#–ü—Ä–æ–≤–µ—Ä–∫–∞-–Ω–∞-—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è-—Ç–∞–±–ª–∏—Ü—ã-–∏–ª–∏-—Å—Ç–æ–ª–±—Ü–∞)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ–º —Å—Ç–æ–ª–±—Ü–∞](#–ü—Ä–æ–≤–µ—Ä–∫–∞-–Ω–∞-–Ω–∞–ª–∏—á–∏–µ-–ø–µ—Ä–µ–¥-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º-–∏–ª–∏-—É–¥–∞–ª–µ–Ω–∏–µ–º-—Å—Ç–æ–ª–±—Ü–∞)
- [–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è PostgreSQL](#–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ-–ø–æ–ª—è-PostgreSQL)

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π, —Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è–π—Ç–µ –≤—Ä–µ–º—è –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, `2023_08_04_070443_create_posts_table.php` –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ `2023_07_04_070443_create_posts_table.php` (–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, –º–µ–Ω—è–µ—Ç—Å—è –¥–∞—Ç–∞ `2023_08_04` to `2023_07_04`).

–û–Ω–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –ü–æ–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏

–ó–Ω–∞–µ—Ç–µ –ª–∏, —á—Ç–æ –≤ –º–∏–≥—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–µ —Ç–æ–ª—å–∫–æ `timestamps()`, –Ω–æ –∏ `timestampsTz()`, –¥–ª—è —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤?

```php
Schema::create('employees', function (Blueprint $table) {
    $table->increments('id');
    $table->string('name');
    $table->string('email');
    $table->timestampsTz();
});
```

–¢–∞–∫–∂–µ –µ—Å—Ç—å —Ç–∞–∫–∏–µ —Ç–∏–ø—ã –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫ `dateTimeTz()`, `timeTz()`, `timestampTz()`, `softDeletesTz()`.

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –¢–∏–ø—ã —Å—Ç–æ–ª–±—Ü–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ª—é–±–æ–ø—ã—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π –¥–ª—è —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π, –ø—Ä–∏–≤–µ–¥—É –ø–∞—Ä–æ—á–∫—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–æ–≤.

```php
$table->geometry('positions');
$table->ipAddress('visitor');
$table->macAddress('device');
$table->point('position');
$table->uuid('id');
```

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã –º–æ–∂–Ω–æ –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://laravel.com/docs/master/migrations#creating-columns).

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –ó–Ω–∞—á–µ–Ω–∏—è timestamp –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å `timestamp()` —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `useCurrent()` –∏ `useCurrentOnUpdate()`, 
–æ–Ω–∏ –ø–æ–º–æ–≥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `CURRENT_TIMESTAMP` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

```php
$table->timestamp('created_at')->useCurrent();
$table->timestamp('updated_at')->useCurrentOnUpdate();
```

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π, —Ç–æ –Ω–µ—Ç –Ω—É–∂–¥—ã –∑–∞—Ö–æ–¥–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É –º–∏–≥—Ä–∞—Ü–∏–π, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É `php artisan migrate:status`.

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã:

```
Migration name .......................................................................... Batch / Status  
2023_12_01_000000_create_users_table ........................................................... [1] Ran  
2023_12_02_100000_create_password_resets_table ................................................. [1] Ran  
2023_12_03_000000_create_failed_jobs_table ..................................................... [1] Ran    
```

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏

When typing `make:migration` command, you don't necessarily have to use underscore `_` symbol between parts, like `create_transactions_table`. You can put the name into quotes and then use spaces instead of underscores.

```php
// –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
php artisan make:migration create_transactions_table

// –ù–æ —ç—Ç–æ —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
php artisan make:migration "create transactions table"
```

–ò—Å—Ç–æ—á–Ω–∏–∫: [Steve O on Twitter](https://twitter.com/stephenoldham/status/1353647972991578120)

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –°–æ–∑–¥–∞—Ç—å —Å—Ç–æ–ª–±–µ—Ü –ø–æ—Å–ª–µ –¥—Ä—É–≥–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞

_–í–Ω–∏–º–∞–Ω–∏–µ: –¢–æ–ª—å–∫–æ –¥–ª—è MySQL_

–ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü, —Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–º –≤ —Å–ø–∏—Å–∫–µ. –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å, –ø–æ—Å–ª–µ –∫–∞–∫–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω. 

```php
Schema::table('users', function (Blueprint $table) {
    $table->string('phone')->after('email');
});
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü, —á—Ç–æ–±—ã –æ–Ω –Ω–∞—Ö–æ–¥–∏–ª—Å—è –ø–µ—Ä–µ–¥ —É–∫–∞–∑–∞–Ω–Ω—ã–º —Å—Ç–æ–ª–±—Ü–æ–º.

```php
Schema::table('users', function (Blueprint $table) {
    $table->string('phone')->before('created_at');
});
```

–ï—Å–ª–∏ –∂–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü –±—ã–ª –ø–µ—Ä–≤—ã–º –≤ —Ç–∞–±–ª–∏—Ü–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `first()`.

```php
Schema::table('users', function (Blueprint $table) {
    $table->string('uuid')->first();
});
```

–¢–∞–∫–∂–µ –º–µ—Ç–æ–¥ `after()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª–µ–π, —Ç–µ–º —Å–∞–º—ã–º –æ–±—ä–µ–¥–∏–Ω—è—è –∏—Ö –≤ –≥—Ä—É–ø–ø—É.

```php
Schema::table('users', function (Blueprint $table) {
    $table->after('remember_token', function ($table){
        $table->string('card_brand')->nullable();
        $table->string('card_last_four', 4)->nullable();
    });
});
```

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã –∏ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã Laravel 
—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –¥–ª—è –≤–∞—Å Schema::table(), —Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å "\_in_xxxxx_table" or "\_to_xxxxx_table"
–≤ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä "--table", –≥–¥–µ —É–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `php artisan change_fields_products_table` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—É—Å—Ç–æ–π –∫–ª–∞—Å—Å.

```php
class ChangeFieldsProductsTable extends Migration
{
    public function up()
    {
        //
    }
}
```

–ù–æ —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å `in_xxxxx_table` `php artisan make:migration change_fields_in_products_table` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç—Å—è `Schema::table()` —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º —Ç–∞–±–ª–∏—Ü—ã.

```php
class ChangeFieldsProductsTable extends Migration
{
    public function up()
    {
        Schema::table('products', function (Blueprint $table) {
            //
        })
    };
}
```

Also you can specify `--table` parameter `php artisan make:migration whatever_you_want --table=products`

```php
class WhateverYouWant extends Migration
{
    public function up()
    {
        Schema::table('products', function (Blueprint $table) {
            //
        })
    };
}
```

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –í—ã–≤–æ–¥ SQL –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –º–∏–≥—Ä–∞—Ü–∏–π

–ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã `migrate --pretend`, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–≤–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è. 
–≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

```php
php artisan migrate --pretend
```

–°–æ–≤–µ—Ç –æ—Ç [@zarpelon](https://github.com/zarpelon)

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ö–æ–º–∞–Ω–¥–∞ Laravel –≤—ã–ø—É—Å—Ç–∏–ª–∞ Laravel 8.37 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–Ω–æ–Ω–∏–º–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏, 
–∫–æ—Ç–æ—Ä–∞—è —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É GitHub —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏ –∏–º–µ–Ω –∫–ª–∞—Å—Å–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏.

–°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–≥—Ä–∞—Ü–∏–π –∏–º–µ—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –∏–º—è –∫–ª–∞—Å—Å–∞, —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –Ω—É–ª—è.

–í–æ—Ç –ø—Ä–∏–º–µ—Ä –∏–∑ [pull request](https://github.com/laravel/framework/pull/36906):

```php
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(
    {
        Schema::table('people', function (Blueprint $table) {
            $table->string('first_name')->nullable();
        });
    }

    public function down()
    {
        Schema::table('people', function (Blueprint $table) {
            $table->dropColumn('first_name');
        });
    }
};
```

–°–æ–≤–µ—Ç –æ—Ç [@nicksdot](https://twitter.com/nicksdot/status/1432340806275198978)

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞

–í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å ¬´–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π¬ª –æ —Å—Ç–æ–ª–±—Ü–µ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π, —Ç–µ–º —Å–∞–º—ã–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç–µ –ø–æ–ª–µ–∑–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

–ï—Å–ª–∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫—Ç–æ-—Ç–æ, –∫—Ä–æ–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–∞–∫–∏—Ö-–ª–∏–±–æ –æ–ø–µ—Ä–∞—Ü–∏–π.

```php
$table->unsignedInteger('interval')
    ->index()
    ->comment('This column is used for indexing.')
```

–°–æ–≤–µ—Ç –æ—Ç [@nicksdot](https://twitter.com/nicksdot/status/1432340806275198978)

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ —Å—Ç–æ–ª–±—Ü–∞

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ —Å—Ç–æ–ª–±—Ü–∞, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥—ã hasTable –∏ hasColumn:

```php
if (Schema::hasTable('users')) {
    // –¢–∞–±–ª–∏—Ü–∞ "users" —Å—É—â–µ—Å—Ç–≤—É–µ—Ç...
}

if (Schema::hasColumn('users', 'email')) {
    // –¢–∞–±–ª–∏—Ü–∞ "users" –Ω–∞–π–¥–µ–Ω–∞ –∏ –∏–º–µ–µ—Ç –ø–æ–ª–µ "email"...
}
```

–°–æ–≤–µ—Ç –æ—Ç [@dipeshsukhia](https://github.com/dipeshsukhia)

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ–º —Å—Ç–æ–ª–±—Ü–∞

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª–±–µ—Ü –≤ —Ç–∞–±–ª–∏—Ü—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏ –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ, –µ—Å–ª–∏ –æ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –î–ª—è —ç—Ç–æ–≥–æ –≤–≤–æ–¥—è—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:

üëâ whenTableDoesntHaveColumn

üëâ whenTableHasColumn

–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è Laravel 9.6.0

```php
return new class extends Migration {
    public function up()
    {
        Schema::whenTableDoesntHaveColumn('users', 'name', function (Blueprint $table) {
            $table->string('name', 30);
        });
    }

    public function down()
    {
        Schema::whenTableHasColumn('users', 'name', function (Blueprint $table) {
            $table->dropColumn('name');
        });
    }
}
```

–°–æ–≤–µ—Ç –æ—Ç [@iamharis010](https://twitter.com/iamharis010/status/1510579415163432961)

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è PostgreSQL

–ï—Å–ª–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª–µ, —Ç–æ –¥–ª—è PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–µ–º.

```php
return new class extends Migration {
    public function up()
    {
        DB::transaction(function () {
            DB::statement('ALTER TABLE settings_workflows RENAME COLUMN after_hiring TO after_date');
        });
    }

    public function down()
    {
        DB::transaction(function () {
            DB::statement('ALTER TABLE settings_workflows RENAME COLUMN after_date TO after_hiring');
        });
    }
}
```

–î–ª—è MySQL –ø–æ–º–æ–∂–µ—Ç —Ç–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç.

```php
return new class extends Migration {
    public function up()
    {
        Schema::table('settings_workflows', function(Blueprint $table) {
            $table->renameColumn('after_hiring', 'after_date');
        });
    }


    public function down()
    {
        Schema::table('settings_workflows', function(Blueprint $table) {
            $table->renameColumn('after_date', 'after_hiring');
        });
    }
}
```

[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É](#Migrations)
___